console.log("PSB 2D Code Gnerator Start");let partNumber=document.querySelector("#partNumber"),qrContainer=document.querySelector(".code-placeholder.qr-code"),dataMatrixContainer=document.querySelector(".code-placeholder.data-matrix"),downloadButtons=document.querySelectorAll(".generate-button");function generator(e){let t=document.querySelector('input[name="website"]:checked').value+"/"+e,n=DATAMatrix({msg:t,dim:2e3,pad:1}),r=QRCode({msg:t,dim:2e3,pad:1});dataMatrixContainer.replaceChildren(),dataMatrixContainer.appendChild(n),qrContainer.replaceChildren(),qrContainer.appendChild(r),document.querySelectorAll(".generate-button").forEach((t=>{t.classList.add("shown"),t.dataset.name=e}))}function download(e,t,n){var r=(new XMLSerializer).serializeToString(document.querySelector(".code-placeholder."+n+" svg")),a=document.createElement("canvas");a.getContext("2d");canvg(a,r);var d=a.toDataURL("image/png"),o=document.createElement("a");o.href=d,o.download=t+"-"+n+".png",o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}window.onload=function(){generator(partNumber.value),lister()},partNumber.addEventListener("input",(function(){partNumber.value&&generator(partNumber.value)})),document.querySelector("form").addEventListener("change",(function(e){generator(partNumber.value)})),downloadButtons.forEach((function(e){e.addEventListener("click",(function(e){let t=e.target;download(t,t.dataset.name,t.dataset.type)}))}));let listInput=document.querySelector(".bulk-generator input");function lister(){let e=listInput.value,t=e.split(/,\s*/),n=document.querySelector(".generator-table");e&&(n.innerHTML="",t.forEach((e=>{let t=document.createElement("div");t.classList.add("generator-item");let r,a=identifyBrand(e);if(t.classList.add("brand--"+a.toLowerCase().replace(" ","-")),r="Brenthaven"==a?"https://brenthaven.com/"+e:"Gumdrop Cases"==a?"https://www.gumdropcases.com/"+e:"Invalid URL",t.innerHTML=`\n        <div class="generator-item__value">${e}</div>\n        <div class="generator-item__brand"><span>${a}</span></div>\n        <div class="generator-item__url">${r}</div>\n        <div class="generator-item__code"></div>\n      `,console.log(r),"Invalid URL"!=r){let e=DATAMatrix({msg:r,dim:2e3,pad:1});t.querySelector(".generator-item__code").replaceChildren(),t.querySelector(".generator-item__code").appendChild(e)}else t.querySelector(".generator-item__code").innerHTML+='<div class="empty-code"></div>';n.appendChild(t)})))}function identifyBrand(e){let t;return t=/^\d{4}(?:$|\d{3}$)/.test(e)?"Brenthaven":/\b\d{2}[A-Za-z]\d{3}(?:$|[EC]\d{2}[-]\d(?:$|\d$))/.test(e)?"Gumdrop Cases":"Invalid SKU",t}listInput.addEventListener("input",(function(){lister()}));